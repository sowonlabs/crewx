# WBS Skill Design Document

## 1. Overview

**WBS Skill**: Work Breakdown Structure - ì‘ì—… ë¶„í•´ ë° ê´€ë¦¬ ì‹œìŠ¤í…œ

í•µì‹¬ ì»¨ì…‰:
- **Dual Interface**: CLI ëª…ë ¹ì–´ + ìì—°ì–´ ì¸í„°í˜ì´ìŠ¤
- CLIë¡œ ì§ì ‘ ì œì–´í•˜ê±°ë‚˜, ì½”ë””ë„¤ì´í„°ì—ê²Œ ìì—°ì–´ë¡œ ìš”ì²­
- ë‚´ë¶€ì—ì„œ ì½”ë””ë„¤ì´í„° AIê°€ ë³µì¡í•œ íŒë‹¨ ì²˜ë¦¬

## 2. Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì‚¬ìš©ì (ê°œë°œíŒ€ì¥, ì™¸ë¶€ ì—ì´ì „íŠ¸ ë“±)                              â”‚
â”‚       â”‚                                                         â”‚
â”‚       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       â”‚                     â”‚                                   â”‚
â”‚       â–¼                     â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ CLI ì§ì ‘ì‚¬ìš© â”‚      â”‚ ìì—°ì–´ ì¸í„°í˜ì´ìŠ¤ (q/x)              â”‚   â”‚
â”‚  â”‚             â”‚      â”‚                                     â”‚   â”‚
â”‚  â”‚ wbs.js list â”‚      â”‚ wbs.js q "ì§„í–‰ ìƒí™© ì–´ë•Œ?"          â”‚   â”‚
â”‚  â”‚ wbs.js job  â”‚      â”‚ wbs.js x "ì‹¤íŒ¨í•œ ì‘ì—… ì¬ì‹¤í–‰í•´"      â”‚   â”‚
â”‚  â”‚ wbs.js exec â”‚      â”‚                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                            â”‚                          â”‚
â”‚         â”‚                            â–¼                          â”‚
â”‚         â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚         â”‚             â”‚  ì½”ë””ë„¤ì´í„° ì—ì´ì „íŠ¸ (@wbs_coordinator)â”‚  â”‚
â”‚         â”‚             â”‚  - ìì—°ì–´ í•´ì„                        â”‚  â”‚
â”‚         â”‚             â”‚  - ì‘ì—… ë¶„í•´ (AI íŒë‹¨)                â”‚  â”‚
â”‚         â”‚             â”‚  - wbs.js CLI í˜¸ì¶œ                   â”‚  â”‚
â”‚         â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                            â”‚                          â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚                          â”‚
â”‚                                      â–¼                          â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                      â”‚  WBS State (alasql + .wbs-data.json)  â”‚  â”‚
â”‚                      â”‚  - Project / Job / Execution          â”‚  â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 3. CLI Commands

### 3.1 Project Commands (top-level)

| Command | Description |
|---------|-------------|
| `wbs.js create "Project Title"` | í”„ë¡œì íŠ¸ ìƒì„± |
| `wbs.js list` | ëª¨ë“  WBS í”„ë¡œì íŠ¸ ëª©ë¡ |
| `wbs.js status <wbs-id>` | í”„ë¡œì íŠ¸ ìƒíƒœ + ì§„í–‰ë¥  ìš”ì•½ |
| `wbs.js delete <wbs-id>` | í”„ë¡œì íŠ¸ ì‚­ì œ |

### 3.2 Job Commands (sub-commands)

| Command | Description |
|---------|-------------|
| `wbs.js job list <wbs-id>` | í”„ë¡œì íŠ¸ ë‚´ Job ëª©ë¡ |
| `wbs.js job add <wbs-id> --title "..." --agent @claude --seq N` | Job ì¶”ê°€ |
| `wbs.js job update <job-id> --status completed` | Job ìƒíƒœ/ì†ì„± ì—…ë°ì´íŠ¸ |
| `wbs.js job next <wbs-id>` | ë‹¤ìŒ pending Job ì‹¤í–‰ |
| `wbs.js job run <wbs-id>` | ëª¨ë“  pending Job ìˆœì°¨ ì‹¤í–‰ |
| `wbs.js job retry <job-id>` | Job ì¬ì‹¤í–‰ (ìƒˆ Execution ìƒì„±) |

### 3.3 Execution Commands (sub-commands)

| Command | Description |
|---------|-------------|
| `wbs.js exec list <job-id>` | Jobì˜ ì‹¤í–‰ ì´ë ¥ ì¡°íšŒ |
| `wbs.js exec status <exec-id>` | íŠ¹ì • ì‹¤í–‰ ìƒíƒœ ì¡°íšŒ |
| `wbs.js exec kill <exec-id>` | ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ |

### 3.4 Coordinator Commands (ìì—°ì–´ ì¸í„°í˜ì´ìŠ¤)

crewx íŒ¨í„´ì„ ë”°ë¥´ëŠ” ìì—°ì–´ ì¸í„°í˜ì´ìŠ¤:

| Command | Description |
|---------|-------------|
| `wbs.js q "ì§ˆë¬¸"` | ì½”ë””ë„¤ì´í„°ì—ê²Œ ì§ˆë¬¸ (ì¡°íšŒ/ë¶„ì„) |
| `wbs.js x "ìš”ì²­"` | ì½”ë””ë„¤ì´í„°ì—ê²Œ ì‹¤í–‰ ìš”ì²­ (ë³€ê²½/ì‹¤í–‰) |

**Query ì˜ˆì‹œ (q):**
```bash
wbs.js q "ì§„í–‰ ìƒí™© ì–´ë•Œ?"
wbs.js q "ì‹¤íŒ¨í•œ ì‘ì—… ìˆì–´?"
wbs.js q "ë‚¨ì€ ì‘ì—… ì‹œê°„ ì˜ˆì¸¡í•´ì¤˜"
wbs.js q "JWT ê´€ë ¨ ì‘ì—…ë§Œ ë³´ì—¬ì¤˜"
```

**Execute ì˜ˆì‹œ (x):**
```bash
wbs.js x "ì‹¤íŒ¨í•œ ì‘ì—… ì¬ì‹¤í–‰í•´"
wbs.js x "JWT ê²€ì¦ ë¯¸ë“¤ì›¨ì–´ êµ¬í˜„ ì‘ì—…ì„ ë¶„í•´í•´ì¤˜"
wbs.js x "ì´ í”„ë¡œì íŠ¸ ì·¨ì†Œí•´"
wbs.js x "3ë²ˆ ì‘ì—… ë‹´ë‹¹ìë¥¼ @claude:opusë¡œ ë³€ê²½í•´"
```

**ë‚´ë¶€ ë°”ì¸ë”©:**
```javascript
// wbs.js q "..." â†’ crewx q "@wbs_coordinator ..."
// wbs.js x "..." â†’ crewx x "@wbs_coordinator ..."
```

### 3.5 Job Update Options

```bash
wbs.js job update <job-id> [options]
  --status <status>   Status: pending, running, completed, failed
  --title "..."       Job ì œëª© ë³€ê²½
  --agent "@..."      ë‹´ë‹¹ Agent ë³€ê²½
  --seq N             ì‹¤í–‰ ìˆœì„œ ë³€ê²½
```

## 4. Key Principles

1. **30ë¶„ íƒ€ì„ë°•ì‹±**
   - ìµœì†Œ: 15ë¶„
   - ìµœì : 25-30ë¶„
   - ìµœëŒ€: 45ë¶„

2. **Dual Interface**
   - CLI ëª…ë ¹ì–´: ì •í™•í•œ ì œì–´ê°€ í•„ìš”í•  ë•Œ
   - ìì—°ì–´ (q/x): í¸ë¦¬í•œ ì†Œí†µì´ í•„ìš”í•  ë•Œ
   - ë‘ ë°©ì‹ ëª¨ë‘ ë™ì¼í•œ ìƒíƒœì— ì ‘ê·¼

3. **ì§€ëŠ¥ì  íŒë‹¨ì€ AIê°€**
   - ë³µì¡ë„ ë¶„ì„
   - Job ë¶„í•´
   - ìì—°ì–´ í•´ì„
   - ì½”ë””ë„¤ì´í„° AIê°€ ë‹´ë‹¹

4. **ì½”ë“œëŠ” ìƒíƒœ ê´€ë¦¬ë§Œ**
   - wbs.jsëŠ” DB CRUD + ì›Œì»¤ ì‹¤í–‰ë§Œ
   - íŒë‹¨ ë¡œì§ ì—†ìŒ

## 5. Internal Coordinator

- **crewx ë‚´ì¥**: ì™¸ë¶€ì—ì„œ crewx ì„¤ì¹˜ ë¶ˆí•„ìš”
- **SKILL.md ê¸°ë°˜ í•™ìŠµ**: ì‘ì—… ë¶„í•´ ë°©ë²•ì„ ë¬¸ì„œì—ì„œ í•™ìŠµ
- **wbs.js CLI ì‚¬ìš©**: Job ê´€ë¦¬ë¥¼ ìœ„í•´ wbs.js ë„êµ¬ í™œìš©

### Coordinator Agent Configuration

See `crewx.yaml` for the coordinator agent definition:
- **ID**: `wbs_coordinator`
- **Model**: sonnet (better reasoning for coordination)
- **Role**: ì‘ì—… ë¶„í•´, Job ë“±ë¡, ìƒíƒœ ê´€ë¦¬

Usage:
```bash
# From skills/wbs directory
crewx x "@wbs_coordinator Break down: Implement user authentication"
```

## 6. Data Storage

- **alasql**: ì¸ë©”ëª¨ë¦¬ DBë¡œ ë¹ ë¥¸ ì¿¼ë¦¬
- **.wbs-data.json**: íŒŒì¼ë¡œ ì˜ì†ì„± ë³´ì¥

### 6.1 ERD (Entity Relationship Diagram)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          WBS (Project)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         VARCHAR    wbs-{timestamp}                      â”‚
â”‚ title           VARCHAR    í”„ë¡œì íŠ¸ëª…                            â”‚
â”‚ status          ENUM       planning|active|completed|cancelled  â”‚
â”‚ created_at      DATETIME                                        â”‚
â”‚ updated_at      DATETIME                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ 1:N
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            Job                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         VARCHAR    job-{timestamp}                      â”‚
â”‚ wbs_id (FK)     VARCHAR    â†’ WBS.id                             â”‚
â”‚ title           VARCHAR    ì‘ì—…ëª…                                â”‚
â”‚ agent           VARCHAR    @claude:sonnet                       â”‚
â”‚ seq             INT        ì‹¤í–‰ ìˆœì„œ                             â”‚
â”‚ status          ENUM       pending|running|completed|failed     â”‚
â”‚ created_at      DATETIME                                        â”‚
â”‚ updated_at      DATETIME                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ 1:N (ì¬ì‹œì‘/ì¬ì‹œë„ ê°€ëŠ¥)
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Execution                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         VARCHAR    exec-{timestamp}                     â”‚
â”‚ job_id (FK)     VARCHAR    â†’ Job.id                             â”‚
â”‚ pid             INT        crewx í”„ë¡œì„¸ìŠ¤ ID                     â”‚
â”‚ status          ENUM       running|completed|failed|killed      â”‚
â”‚ started_at      DATETIME   ì‹¤í–‰ ì‹œì‘                             â”‚
â”‚ ended_at        DATETIME   ì‹¤í–‰ ì¢…ë£Œ (nullable)                  â”‚
â”‚ exit_code       INT        ì¢…ë£Œ ì½”ë“œ (nullable)                  â”‚
â”‚ error           TEXT       ì—ëŸ¬ ë©”ì‹œì§€ (nullable)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 Execution ì´ë ¥ ê´€ë¦¬

ë™ì¼ Jobì˜ ë‹¤ì¤‘ ì‹¤í–‰ ì§€ì›:

```
Job: "JWT ê²€ì¦ êµ¬í˜„" (job-123)
â”œâ”€â”€ exec-001: pid=1234, failed (íƒ€ì„ì•„ì›ƒ)
â”œâ”€â”€ exec-002: pid=1235, killed (ì‚¬ìš©ì ì¤‘ë‹¨)
â””â”€â”€ exec-003: pid=1236, completed âœ…
```

- **Job.status**: ìµœì‹  Execution ê²°ê³¼ ë°˜ì˜
- **Execution**: ëª¨ë“  ì‹¤í–‰ ì´ë ¥ ë³´ì¡´

### 6.3 Execution Commands

```bash
# ì‹¤í–‰ ì´ë ¥ ì¡°íšŒ
wbs.js exec list <job-id>

# ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
wbs.js exec kill <exec-id>

# Job ì¬ì‹¤í–‰ (ìƒˆ Execution ìƒì„±)
wbs.js job retry <job-id>
```

## 7. Status Indicators

wbs.md íŒŒì¼ í˜¸í™˜ ìƒíƒœ í‘œì‹œ:

| Icon | Status | Description |
|------|--------|-------------|
| â¬œï¸ | pending | ëŒ€ê¸° |
| ğŸŸ¡ | in_progress | ì§„í–‰ì¤‘ |
| âœ… | completed | ì™„ë£Œ |
| â¸ï¸ | on_hold | ë³´ë¥˜ |

## 8. Implementation Phases

### Phase 1: Status Commands
- `overview`, `list`, `show`, `progress` êµ¬í˜„
- ê¸°ë³¸ ë°ì´í„° ì¡°íšŒ ê¸°ëŠ¥

### Phase 2: Coordinator AI Integration
- `create` ì‹œ ë‚´ë¶€ crewx í˜¸ì¶œ
- AI ê¸°ë°˜ ì‘ì—… ë¶„í•´

### Phase 3: Worker Execution Enhancement
- ì›Œì»¤ ì—ì´ì „íŠ¸ ì‹¤í–‰ ê°œì„ 
- ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™”
