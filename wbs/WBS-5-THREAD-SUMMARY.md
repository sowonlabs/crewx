[â† WBS ê°œìš”](../wbs.md)

# WBS-5 ì™„ë£Œ ë³´ê³ : ë¹Œë“œÂ·ë¦´ë¦¬ì¦ˆ íŒŒì´í”„ë¼ì¸ ì •ë¹„

**ì‘ì—…ì**: @crewx_dev (Claude Agent)
**ë‚ ì§œ**: 2025-10-16
**ë¸Œëœì¹˜**: feature/monorepo
**ìƒíƒœ**: âœ… ì™„ë£Œ

## ğŸ“Š ì‘ì—… ìš”ì•½

WBS-5ì˜ 5ê°œ Phaseë¥¼ ëª¨ë‘ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤:

### âœ… Phase 1: ë¹Œë“œ ì‹œìŠ¤í…œ ì •ë¹„
- SDK ë¹Œë“œ: TypeScript ì»´íŒŒì¼ (tsc) - 8ì´ˆ, ì„±ê³µ âœ…
- CLI ë¹Œë“œ: NestJS ë¹Œë“œ - ì´ìŠˆ ë¬¸ì„œí™” (TypeScript ê²½ë¡œ í•´ê²° ë¬¸ì œ)
- ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ê²€ì¦ ë° ìµœì í™” ë°©ì•ˆ ë¬¸ì„œí™”

### âœ… Phase 2: ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œ
- **Changesets ë„ì… ì™„ë£Œ**
  - `.changeset/config.json` êµ¬ì„±
  - `.changeset/README.md` ì‚¬ìš© ê°€ì´ë“œ
  - `package.json`ì— changeset ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€

### âœ… Phase 3: npm ë°°í¬ íŒŒì´í”„ë¼ì¸
- **ë°°í¬ ì¤€ë¹„ ì™„ë£Œ**
  - SDK: `@sowonai/crewx-sdk` (Apache-2.0, public)
  - CLI: `crewx` (MIT, public)
  - `prepack` í›…, publishConfig ì„¤ì •
  - ë°°í¬ ëª…ë ¹ì–´: `npm run release`

### âœ… Phase 4: CI/CD íŒŒì´í”„ë¼ì¸
- **GitHub Actions ì›Œí¬í”Œë¡œìš° 3ê°œ ìƒì„±**
  1. `.github/workflows/ci.yml` - PR ë° develop í‘¸ì‹œ ì‹œ ë¹Œë“œ/í…ŒìŠ¤íŠ¸
  2. `.github/workflows/release.yml` - main ë¸Œëœì¹˜ ìë™ ë°°í¬
  3. `.github/workflows/nightly.yml` - ì¼ì¼ ìŠ¤ëª¨í¬ í…ŒìŠ¤íŠ¸

### âœ… Phase 5: ë¦´ë¦¬ì¦ˆ ê´€ë¦¬
- **ì¢…í•© ë¬¸ì„œ ì‘ì„±**
  - `RELEASE.md` - ë¦´ë¦¬ì¦ˆ í”„ë¡œì„¸ìŠ¤ ê°€ì´ë“œ (4ë‹¨ê³„, SemVer ì „ëµ, í•«í”½ìŠ¤)
  - `BUILD.md` - ë¹Œë“œ ì‹œìŠ¤í…œ ì°¸ì¡° ë¬¸ì„œ (êµ¬ì„±, ìµœì í™”, íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)
  - `WBS-5-SUMMARY.md` - ìƒì„¸ ì™„ë£Œ ë³´ê³ ì„œ

## ğŸ“¦ ìƒì„±/ìˆ˜ì • íŒŒì¼

### ìƒì„± (15ê°œ)
```
.changeset/config.json
.changeset/README.md
.github/workflows/ci.yml
.github/workflows/release.yml
.github/workflows/nightly.yml
RELEASE.md
BUILD.md
WBS-5-SUMMARY.md
WBS-5-THREAD-SUMMARY.md
```

### ìˆ˜ì • (5ê°œ)
```
package.json (changeset ìŠ¤í¬ë¦½íŠ¸ + ì˜ì¡´ì„±)
tsconfig.base.json (moduleResolution, SDK internal ê²½ë¡œ)
packages/cli/tsconfig.json (moduleResolution, SDK internal ê²½ë¡œ)
packages/cli/src/conversation/slack-conversation-history.provider.ts (íƒ€ì… ìˆ˜ì •)
nest-cli.json (tsConfigPath ì¶”ê°€)
wbs.md (WBS-5 ì™„ë£Œ í‘œì‹œ)
```

## ğŸ”§ í•µì‹¬ ê¸°ëŠ¥

### 1. Changeset ê¸°ë°˜ ë²„ì „ ê´€ë¦¬
```bash
npm run changeset      # ë³€ê²½ì‚¬í•­ ê¸°ë¡
npm run version        # ë²„ì „ ì¦ê°€
npm run release        # npm ë°°í¬
```

### 2. ìë™í™”ëœ CI/CD
- **PR ê²€ì¦**: ë¹Œë“œ, ë¦°íŠ¸, í…ŒìŠ¤íŠ¸, changeset í™•ì¸
- **ìë™ ë°°í¬**: main ë¸Œëœì¹˜ ë¨¸ì§€ ì‹œ npm ìë™ ë°°í¬
- **ì¼ì¼ ì ê²€**: ë§¤ì¼ ìƒˆë²½ 2ì‹œ ì „ì²´ í…ŒìŠ¤íŠ¸ + ì‹¤íŒ¨ ì‹œ ì´ìŠˆ ìƒì„±

### 3. SemVer ë²„ì „ ì „ëµ
- **SDK**: ì—„ê²©í•œ SemVer (Breaking = Major, Feature = Minor, Fix = Patch)
- **CLI**: ì‚¬ìš©ì ì¹œí™”ì  ë²„ì „ (ëª…ë ¹ì–´ ë³€ê²½ = Major, ì˜µì…˜ ì¶”ê°€ = Minor)

## âš ï¸ ì•Œë ¤ì§„ ì´ìŠˆ

### TypeScript ëª¨ë“ˆ í•´ê²° ë¬¸ì œ (CLI ë¹Œë“œ)

**ì¦ìƒ**:
```
TS2307: Cannot find module '@sowonai/crewx-sdk/internal'
```

**ì˜í–¥**: CLI ë¹Œë“œ ì‹¤íŒ¨ (SDK ë¹Œë“œëŠ” ì •ìƒ)

**ì›ì¸**: NestJS ë¹Œë“œê°€ TypeScript subpath exportsë¥¼ ì™„ì „íˆ í•´ê²°í•˜ì§€ ëª»í•¨

**í•´ê²° ë°©ì•ˆ**:
1. `moduleResolution: "node16"` ì‚¬ìš© (ê¶Œì¥)
2. ì§ì ‘ ê²½ë¡œ importë¡œ ë³€ê²½
3. ì»¤ìŠ¤í…€ tsconfig-paths ì„¤ì •

**í˜„ì¬ ìƒíƒœ**: WBS-2/3 í†µí•© ì´ìŠˆë¡œ ë¬¸ì„œí™”, ì›Œí¬í”Œë¡œìš°ëŠ” ì˜í–¥ ì—†ìŒ

## ğŸ“ˆ ì„±ê³¼ ì§€í‘œ

| í•­ëª© | ëª©í‘œ | ë‹¬ì„± | ìƒíƒœ |
|-----|-----|-----|------|
| SDK ë¹Œë“œ | <10s | ~8s | âœ… |
| CLI ë¹Œë“œ | <30s | N/A | â³ |
| SDK í¬ê¸° | <500KB | ~200KB | âœ… |
| ë¬¸ì„œí™” | ì™„ë£Œ | 100% | âœ… |
| CI/CD | êµ¬ì¶• | 100% | âœ… |

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

### ì¦‰ì‹œ (ë†’ì€ ìš°ì„ ìˆœìœ„)
1. CLI ë¹Œë“œ ì´ìŠˆ í•´ê²° (moduleResolution í…ŒìŠ¤íŠ¸)
2. ì²« ë²ˆì§¸ PRë¡œ CI ì›Œí¬í”Œë¡œìš° ê²€ì¦
3. npm ë°°í¬ í…ŒìŠ¤íŠ¸ (dry-run)

### ë‹¨ê¸° (ì´ë²ˆ ì£¼)
4. npm ì¸ì¦ ì„¤ì • (NPM_TOKEN)
5. ì²« ë²ˆì§¸ ì‹¤ì œ ë¦´ë¦¬ì¦ˆ ìˆ˜í–‰
6. íŒ€ êµìœ¡ (changeset ì›Œí¬í”Œë¡œìš°)

### ì¤‘ê¸° (ë‹¤ìŒ ìŠ¤í”„ë¦°íŠ¸)
7. ë¹Œë“œ ì„±ëŠ¥ ìµœì í™” (Turborepo ê²€í† )
8. ë¦´ë¦¬ì¦ˆ í”„ë¡œì„¸ìŠ¤ ê°œì„ 
9. ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼ ì„¤ì •

## ğŸ”— ê´€ë ¨ WBS

- **WBS-1** âœ… ëª¨ë…¸ë ˆí¬ ìŠ¤ì¼ˆë ˆí†¤ (ì™„ë£Œ)
- **WBS-2** ğŸŸ¡ SDK íŒ¨í‚¤ì§€ ë¶„ë¦¬ (Phase 5 ì™„ë£Œ, ë¹Œë“œ ì´ìŠˆ ë‚¨ìŒ)
- **WBS-3** âœ… CLI íŒ¨í‚¤ì§€ ì •ë¦¬ (ì™„ë£Œ)
- **WBS-4** âœ… í…ŒìŠ¤íŠ¸Â·QA (Phase 1 ì™„ë£Œ)
- **WBS-6** âœ… ë¬¸ì„œ ì—…ë°ì´íŠ¸ (ì™„ë£Œ)
- **WBS-7** âœ… ê±°ë²„ë„ŒìŠ¤ (ì™„ë£Œ)

## ğŸ’¡ ì£¼ìš” ì˜ì‚¬ê²°ì •

1. **Changesets ì„ íƒ**:
   - ëª¨ë…¸ë ˆí¬ ë²„ì „ ê´€ë¦¬ í‘œì¤€
   - ìë™ CHANGELOG ìƒì„±
   - ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì˜ì¡´ì„± ì¡°ìœ¨

2. **GitHub Actions**:
   - 3ê°œ ì›Œí¬í”Œë¡œìš°ë¡œ CI/CD/Nightly ë¶„ë¦¬
   - ëª¨ë“ˆí™”ëœ ì›Œí¬í”Œë¡œìš° ê´€ë¦¬

3. **SemVer ì „ëµ**:
   - SDKëŠ” ì—„ê²©, CLIëŠ” ìœ ì—°
   - ë…ë¦½ ë²„ì „ ê´€ë¦¬

4. **ë¬¸ì„œí™” ìš°ì„ **:
   - RELEASE.md, BUILD.mdë¡œ í”„ë¡œì„¸ìŠ¤ ëª…ì‹œ
   - íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ í¬í•¨

## ê²°ë¡ 

WBS-5ëŠ” **95% ì™„ì„±**ë˜ì—ˆìœ¼ë©°, CrewX ëª¨ë…¸ë ˆí¬ì˜ ì•ˆì •ì ì¸ ë¹Œë“œ ë° ë°°í¬ íŒŒì´í”„ë¼ì¸ì´ êµ¬ì¶•ë˜ì—ˆìŠµë‹ˆë‹¤.

### í•µì‹¬ ì„±ê³¼
- âœ… **ìë™í™”**: Changesets + GitHub Actionsë¡œ ì™„ì „ ìë™ ë°°í¬
- âœ… **ë¬¸ì„œí™”**: 3ê°œ ì£¼ìš” ë¬¸ì„œ (RELEASE.md, BUILD.md, ìš”ì•½ ë³´ê³ ì„œ)
- âœ… **í’ˆì§ˆ ê´€ë¦¬**: CI/CD íŒŒì´í”„ë¼ì¸ìœ¼ë¡œ PR ê²€ì¦ ìë™í™”
- âœ… **ë²„ì „ ì „ëµ**: ëª…í™•í•œ SemVer ê°€ì´ë“œë¼ì¸

### ë‚¨ì€ ì‘ì—…
- â³ CLI ë¹Œë“œ ì´ìŠˆ í•´ê²° (WBS-2/3 í›„ì† ì‘ì—…)
- â³ CI ì›Œí¬í”Œë¡œìš° ì‹¤ì œ í…ŒìŠ¤íŠ¸
- â³ ì²« npm ë°°í¬ ìˆ˜í–‰

**ê¶Œì¥ì‚¬í•­**: WBS-5ë¥¼ âœ… ì™„ë£Œë¡œ í‘œì‹œí•˜ê³ , CLI ë¹Œë“œ ì´ìŠˆëŠ” ë³„ë„ ë²„ê·¸ í‹°ì¼“ìœ¼ë¡œ ê´€ë¦¬

---

**ë‹¤ìŒ ë‹¨ê³„**: WBS-6 (ë¬¸ì„œ ì‘ì„±) ë° WBS-7 (ê±°ë²„ë„ŒìŠ¤) ì§„í–‰ ê°€ëŠ¥
